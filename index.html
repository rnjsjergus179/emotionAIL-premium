<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>emotionAIL 공식 홈페이지</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; font-family: Arial, sans-serif; overflow: hidden; }
    
    /* HUD 스타일 */
    #right-hud, #left-hud, #hud-3 {
      position: fixed;
      padding: 1%;
      background: rgba(255,255,255,0.8);
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      z-index: 20;
    }

    /* 채팅창 */
    #right-hud {
      top: 10%;
      right: 1%;
      width: 20%;
    }
    #region-select { width: 100%; padding: 5px; font-size: 14px; margin-bottom: 10px; }
    #chat-log { display: none; height: 100px; overflow-y: scroll; border: 1px solid #ccc; padding: 5px; margin-top: 10px; border-radius: 3px; background: #fff; }
    #chat-input-area { display: flex; margin-top: 10px; }
    #chat-input { flex: 1; padding: 5px; font-size: 14px; }

    /* 캘린더 */
    #left-hud {
      top: 10%;
      left: 1%;
      width: 20%;
      max-height: 80vh;
      overflow-y: auto;
    }
    #calendar-container { margin-top: 10px; }
    #calendar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px; }
    #month-year-label { font-weight: bold; font-size: 14px; }

    /* 요금제 안내 */
    .pricing-plans {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .plan {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      min-width: 250px;
    }
    .plan h3 { margin-top: 0; font-size: 1.5rem; }

    /* 기타 스타일 */
    #speech-bubble {
      position: fixed;
      background: white;
      padding: 5px 10px;
      border-radius: 10px;
      font-size: 12px;
      display: none;
      z-index: 30;
      white-space: pre-line;
      pointer-events: none;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    #version-select {
      position: fixed;
      bottom: 10px;
      left: 10px;
      z-index: 50;
    }
    #version-select select {
      padding: 5px;
      font-size: 12px;
    }

    @media (max-width: 480px) {
      #right-hud, #left-hud, #hud-3 { width: 90%; left: 5%; right: 5%; top: 5%; }
    }
  </style>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  
  <script>
    document.addEventListener("contextmenu", event => event.preventDefault());
    let blockUntil = 0;
    let danceInterval;
    let currentCity = "서울"; // 한국어 지역명
    let currentWeather = "";
    
    // 요금제 선택
    function showPricingPlans() {
      alert("월 구독 23,000원 / 주간 구독 16,000원");
    }

    document.addEventListener("copy", function(e) {
      e.preventDefault();
      let selectedText = window.getSelection().toString();
      selectedText = selectedText.replace(/2caa7fa4a66f2f8d150f1da93d306261/g, "HIDDEN");
      e.clipboardData.setData("text/plain", selectedText);
      if (Date.now() < blockUntil) return;
      blockUntil = Date.now() + 3600000;
      showSpeechBubbleInChunks("1시간동안 차단됩니다.");
    });

    async function sendChat() {
      const inputEl = document.getElementById("chat-input");
      const input = inputEl.value.trim();
      
      if (!input) return;

      let response = "";
      const lowerInput = input.toLowerCase();

      if (lowerInput.startsWith("지역 ")) {
        const newCity = lowerInput.replace("지역", "").trim();
        if(newCity) {
          if (newCity === "서울") {
            currentCity = newCity;
            response = `지역이 ${newCity}(으)로 변경되었습니다.`;
          } else {
            response = "지원하지 않는 지역입니다.";
          }
        } else {
          response = "변경할 지역을 입력해주세요.";
        }
      } else {
        response = "저는 그 질문을 이해하지 못했어요. 다시 한번 시도해 주세요!";
      }

      showSpeechBubbleInChunks(response);
      inputEl.value = "";
    }

    function showSpeechBubbleInChunks(text, chunkSize = 15, delay = 3000) {
      const bubble = document.getElementById("speech-bubble");
      const chunks = [];
      for (let i = 0; i < text.length; i += chunkSize) {
        chunks.push(text.slice(i, i + chunkSize));
      }
      let index = 0;
      function showNextChunk() {
        if (index < chunks.length) {
          bubble.textContent = chunks[index];
          bubble.style.display = "block";
          index++;
          setTimeout(showNextChunk, delay);
        } else {
          setTimeout(() => { bubble.style.display = "none"; }, 3000);
        }
      }
      showNextChunk();
    }

    function changeRegion(value) {
      currentCity = value;
      showSpeechBubbleInChunks(`지역이 ${value}(으)로 변경되었습니다.`);
    }

    window.addEventListener("load", function() {
      showPricingPlans();
    });
  </script>
</head>
<body>
  <div id="right-hud">
    <h3>채팅창</h3>
    <select id="region-select" onchange="changeRegion(this.value)">
      <option value="서울">서울</option>
      <option value="인천">인천</option>
      <option value="부산">부산</option>
      <option value="대구">대구</option>
      <!-- 추가적인 지역을 선택할 수 있음 -->
    </select>
    <div id="chat-log"></div>
    <div id="chat-input-area">
      <input type="text" id="chat-input" placeholder="채팅 입력..." />
    </div>
  </div>
  
  <div id="hud-3">
    <h3>요금제 안내</h3>
    <p><strong>월 구독:</strong> 23,000원</p>
    <p><strong>주간 구독:</strong> 16,000원</p>
    <button onclick="showPricingPlans()">요금제 보기</button>
  </div>

  <div id="left-hud">
    <h3>캘린더</h3>
    <div id="calendar-container">
      <!-- 캘린더와 기타 일정 관리 기능 -->
    </div>
  </div>

  <div id="speech-bubble"></div>
  
  <div id="version-select">
    <select onchange="changeRegion(this.value)">
      <option value="latest">최신 버전</option>
      <option value="1.3">구버전 1.3</option>
    </select>
  </div>

  <script>
    // 여기서 추가적인 기능을 처리하는 로직을 작성할 수 있음
  </script>
</body>
</html>
